# Echarts 可视化需求分析

## 1. 背景与目标
- 背景：在加密/区块链领域，数据可视化能帮助快速洞察协议健康状况与市场趋势。
- 目标：基于可视化项目，围绕 4 类典型数据场景，提供直观、可交互的展示与对比：
  1) DeFi 借贷业务 TVL 变化（折线图）
  2) 不同 DEX 的交易量比较（柱状图）
  3) 某个 ERC20 代币前 10 持仓地址的份额比较（饼图）
  4) 某个代币价格走向（K 线图）
- 产出：本阶段仅进行需求分析与文档，不涉及具体实现或技术方案。

## 2. 范围说明
- 包含内容：各图表对应的功能性需求、数据层面的要求、交互与展示规范、验收标准与边界。
- 不包含内容：技术栈选择、项目结构、接口定义、具体数据格式、实现细节或代码。

## 3. 角色与使用场景
- 目标用户：
  - 学习者：理解典型链上数据维度与可视化表达。
- 使用场景：
  - 项目演示：在演示环境中通过图表说明某项指标及其变化。

## 4. 功能性需求（按图表类型）

### 4.1 折线图：DeFi 借贷 TVL 变化
- 目的：展示 TVL 随时间的变化趋势，体现上升、下降与波动。
- 必要维度：时间（横轴）、TVL 数值（纵轴）。
- 数据要求：
  - 时间序列数据必须完整、可排序；支持连续时刻或离散日期。
  - TVL 数值需使用统一货币单位与精度（例如 USD）。
- 交互与展示：
  - 提示：悬停时显示对应时刻的 TVL 值与时间标签。
  - 范围选择：支持用户选择时间范围（如近 7/30/90 天）。
  - 对比（可选）：在多协议场景下支持选择并对比多条线（显示/隐藏）。
- 可视化要求：线条颜色与背景对比清晰，标注峰值与谷值（可选）。

### 4.2 柱状图：不同 DEX 的交易量比较
- 目的：在同一周期内对比多个 DEX 的交易量差异。
- 必要维度：平台名称（横轴类目）、交易量（纵轴数值）。
- 数据要求：
  - 同一周期下的多平台交易量数据需可比（单位一致）。
  - 支持不同周期的切换（如日/周/月）。
- 交互与展示：
  - 提示：悬停显示平台名称与交易量数值。
  - 排序（可选）：支持按交易量进行升/降序展示。
  - 分组/堆叠（可选）：支持在多个周期下的分组或聚合比较。
- 可视化要求：类别标签清晰可读，长名称处理（截断/换行）不影响理解。

### 4.3 饼图：ERC20 前 10 持仓份额比较
- 目的：展示代币持仓的集中度与分布结构，识别头部地址影响力。
- 必要维度：地址标识（名称或缩写）、份额百分比。
- 数据要求：
  - 份额总和应接近或等于 100%；地址数控制在可读范围（如 Top10）。
  - 地址展示需考虑隐私与可读性，支持缩写显示与完整信息在提示中查看。
- 交互与展示：
  - 提示：显示地址与份额百分比；可在提示中给出更多信息（如标签说明）。
  - 聚合（可选）：超出展示范围的份额合并为“其他（Others）”。
- 可视化要求：配色区分明显，比例标签清晰，避免颜色过多导致识别困难。

### 4.4 K 线图：代币价格走向
- 目的：展示价格的开/收/高/低以及波动情况，辅助趋势分析。
- 必要维度：时间、开盘价、收盘价、最高价、最低价；成交量（副图可选）。
- 数据要求：
  - 时间与价格数据需连贯、可排序；数据缺失需可识别与提示。
  - 成交量数据如展示，应与主图时间对齐并支持联动。
- 交互与展示：
  - 提示：显示指定时刻的 OHLC 与时间标签；支持十字参考线。
  - 范围选择：支持横向范围缩放与滚动。
  - 辅助指标（可选）：均线开关（如 MA5/MA10/MA20）与其他常见辅助线。
- 可视化要求：上涨/下跌颜色区分明显；主图与副图布局合理，不遮挡标签。

## 5. 数据与一致性需求
- 数据来源：演示阶段可使用样例数据；若接入真实数据，需注明来源与口径。
- 一致性：各图表使用统一的数值单位、精度与时间格式（例如统一的时区与日期展示规则）。
- 可扩展性：各图表在数据维度上预留扩展空间（如多协议、多个周期或更多地址）。

## 6. 界面与用户体验需求 (UI/UX)

基于已确定的 UI 原型，本项目的界面与用户体验需遵循以下规范：

### 6.1 整体布局与风格
- **布局结构**：采用现代 web 应用的经典三段式布局：
  - **固定页头 (Header)**：位于页面顶部，始终可见，包含 Logo 和主导航链接。背景采用带模糊效果的半透明设计，提升质感。
  - **主内容区 (Main Content)**：滚动区域，位于页头和页脚之间，用于展示核心的图表内容。
  - **固定页脚 (Footer)**：位于页面底部，始终可见，包含版权信息。
- **视觉风格**：
  - **主题**：采用明亮、清新的浅色主题，背景为柔和的灰白色 (`#f8f9fa`)，内容区域为纯白色，营造干净、开阔的视觉感受。
  - **主色调**：使用鲜明、友好的蓝色 (`#4A90E2`) 作为品牌色和交互元素的主色调。
  - **卡片式设计**：所有图表均在独立的“卡片”容器中展示。卡片具有圆角、边框和柔和的阴影，使其从背景中脱颖而出，增强层次感。
  - **字体**：选用现代、易读的无衬线字体 (`Inter` 或系统默认字体)，保证各平台下良好的阅读体验。

### 6.2 响应式设计
- **桌面端 (PC)**：在宽屏设备上，图表卡片在主内容区内采用响应式网格布局（Grid），根据屏幕宽度自动调整列数（例如，每行展示 2-3 个图表）。
- **移动端 (Mobile)**：在窄屏设备（如手机）上，网格布局自动转换为单列布局，所有图表卡片垂直堆叠，确保在小屏幕上依然有良好的可读性和操作性。导航链接在移动端可被隐藏，为内容区释放更多空间。

### 6.3 交互细节
- **通用交互**：保留原定的通用交互需求，包括：
  - **悬停提示 (Tooltip)**：鼠标悬停在图表的关键数据点上时，显示详细信息。
  - **清晰的标题与图例**：每个图表卡片都包含一个明确的标题。
  - **范围选择**：支持图表进行时间或类别的范围筛选。
- **加载动画**：图表卡片在初次加载时，应有平滑的淡入和上移动画，提升用户感官体验。

## 7. 性能与兼容性需求
- 性能：在合理数据量范围内交互流畅（如上千数据点仍可操作）。
- 兼容：支持现代主流浏览器与常见移动设备；无要求的旧版浏览器可不支持。

## 8. 安全与合规需求
- 合规：标注数据来源与时间；避免展示敏感或可识别个人隐私的信息。
- 健壮性：当数据缺失或格式异常时，需进行明确的用户提示与降级展示（例如“数据暂不可用”）。

## 9. 验收标准
- 文档完整性：包含背景与目标、范围、角色与场景、功能性需求、交互与展示、数据与一致性、性能与兼容性、安全与合规、验收标准。
- 可理解性：需求描述清晰、无歧义，便于后续设计与实现阶段直接使用。
- 一致性：各图表的维度与规则一致，术语与表述统一。

## 10. 边界与风险
- 边界：本阶段不考虑技术实现、库选型、项目结构或接口细节；仅做需求分析。
- 风险：真实数据口径不一致、可用性不稳定、数据缺失/噪声会影响展示效果；在演示阶段应做好数据说明与容错策略。