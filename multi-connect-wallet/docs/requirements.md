# 多钱包连接功能产品需求文档 (PRD)

## 1. 概述 (Overview)

### 1.1. 背景 (Background)
当前 DApp 的钱包连接方式单一，限制了用户的选择范围。许多潜在用户因为无法使用他们偏好或已经安装的钱包（如 Bitget Wallet, Coinbase Wallet）而放弃使用我们的应用。为了降低用户入门门槛、提升应用的可访问性和市场竞争力，我们需要提供一个更加全面和灵活的钱包连接方案。

### 1.2. 目标 (Goals)
- **提升用户转化率:** 通过支持更多主流钱包，减少因钱包不支持而导致的用户流失。
- **优化用户体验:** 提供一个简单、直观、统一的钱包连接流程，无论用户使用何种设备或钱包。
- **扩大用户基础:** 吸引来自不同钱包生态的用户群体。

## 2. 用户画像与场景 (User Personas & Scenarios)

### 2.1. 用户画像
- **王刚 (Web3 新手):** 25岁，最近在朋友推荐下安装了 MetaMask 钱包。他希望在探索新的 DApp 时，能用他唯一熟悉的钱包轻松连接。
- **李婷 (移动端核心用户):** 30岁，习惯在手机上管理自己的数字资产，使用 Bitget Wallet 移动端 App。她希望在桌面端使用 DApp 时，能通过扫码安全地连接她的手机钱包。
- **张伟 (多链资深玩家):** 35岁，同时使用 Coinbase Wallet 和 MetaMask 管理不同类型的资产。他希望 DApp 能提供清晰的选项，让他根据需要选择合适的钱包进行连接。

### 2.2. 用户故事 (User Stories)
- **作为一名新用户, 我希望** 看到一个清晰的钱包列表，**以便** 我能快速找到并连接我信任的钱包。
- **作为一名桌面端用户, 我希望** 只需点击一下，就能连接我的浏览器插件钱包（如 MetaMask），**以便** 快速开始使用应用。
- **作为一名移动端钱包用户, 我希望** 能通过扫描二维码的方式连接我的钱包 App，**以便** 在保证私钥安全的同时，在桌面端体验 DApp 的全部功能。
- **作为一名用户, 我希望** 在连接钱包后，能清楚地看到我的钱包地址，并有一个简单的断开连接选项，**以便** 我能完全掌控我的连接状态。

## 3. 功能需求 (Functional Requirements)

### 3.1. 统一的“连接钱包”入口
- 应用的导航栏或页面的显著位置应有一个统一的“连接钱包”按钮。
- 无论用户是否已连接，该按钮都应存在，仅状态和文本发生变化（例如，连接后显示用户地址）。

### 3.2. 钱包选择模态框
- 点击“连接钱包”按钮后，应弹出一个设计精美、信息清晰的模态框。
- **模态框内容:**
    - **标题:** “连接您的钱包”。
    - **钱包列表:**
        - 列表应至少包含以下钱包选项，并附带官方 Logo：
            - MetaMask
            - Bitget Wallet
            - Coinbase Wallet
    - **连接方式提示:**
        - 每个钱包选项下方应有简短的文字或图标，提示其主要连接方式（例如，“浏览器插件”或“扫码连接”）。
        - 提供一个通用的“使用 WalletConnect”选项，点击后直接显示二维码，以覆盖更多移动端钱包。
    - **服务条款:** 模态框底部应包含指向服务条款和隐私政策的链接。

### 3.3. 核心连接流程

#### 3.3.1. 浏览器插件钱包连接流程
1.  用户在钱包选择模态框中点击一个已安装的浏览器插件钱包（如 MetaMask）。
2.  系统应自动检测并唤起对应的浏览器钱包插件，请求用户授权连接。
3.  用户在钱包插件中点击“连接”或“授权”。
4.  连接成功后，DApp 页面应自动关闭模态框，并在“连接钱包”按钮的位置显示用户的部分钱包地址（如 `0x1234...5678`）。
5.  如果用户拒绝连接，模态框应保持打开状态，或显示一个“连接失败，请重试”的提示。

#### 3.3.2. 移动端钱包扫码连接流程 (WalletConnect)
1.  用户在钱包选择模态框中点击一个支持扫码的钱包（如 Bitget Wallet）或通用的 “WalletConnect” 选项。
2.  模态框内容切换为显示一个清晰的二维码。
3.  用户打开手机上的对应钱包 App（MetaMask, Bitget Wallet, Coinbase Wallet 等），使用“扫一扫”功能扫描桌面端的二维码。
4.  用户的手机钱包 App 会弹出连接授权请求。
5.  用户在手机上确认连接。
6.  连接成功后，桌面端的 DApp 页面应自动关闭模态框，并显示用户的钱包地址。

### 3.4. 连接后的状态管理
- **显示连接状态:** 用户连接成功后，页面应始终清晰展示当前连接的钱包地址。
- **断开连接:**
    - 点击已显示地址的按钮，应出现一个包含“断开连接”选项的下拉菜单或模态框。
    - 用户点击“断开连接”后，应用应立即恢复到未连接状态，“连接钱包”按钮恢复初始样式。

## 4. 支持范围 (Supported Scope)

### 4.1. 支持的钱包
- **浏览器插件:**
    - MetaMask
    - Bitget Wallet
    - Coinbase Wallet
- **移动端 App (通过 WalletConnect 扫码):**
    - MetaMask Mobile App
    - Bitget Wallet App
    - Coinbase Wallet App

### 4.2. 支持的平台
- **桌面端浏览器:** Chrome, Firefox, Edge, Safari 的最新版本。
- **移动端:** 本次需求主要关注桌面端体验，移动端连接通过扫码完成，不涉及移动端浏览器内的直接访问。

## 5. 范围之外 (Out of Scope)
- 不支持同时连接多个钱包。
- 不提供在 DApp 内创建新钱包的功能。
- 不支持除 EVM 兼容链以外的其他区块链网络。
- 不涉及交易、签名等连接后的具体交互功能（这些由其他模块负责）。